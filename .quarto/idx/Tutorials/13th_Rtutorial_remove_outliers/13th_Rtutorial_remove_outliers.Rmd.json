{"title":"Tutorial","markdown":{"yaml":{"title":"Tutorial","output":"learnr::tutorial","runtime":"shiny_prerendered"},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nlibrary(learnr)\nlibrary(mosaic)\nlibrary(openintro)\nlibrary(tidyverse)\nknitr::opts_chunk$set(echo = FALSE)\n```\n\n\n\nIn this optional tutorial we'll use the `filter()` function from the `tidyverse` library. We will use it to remove outliers from a set of data. There is no assignment for this tutorial, but completing it will allow you to earn 1 point extra credit on the project.\n\n## Setup\n\n1. The `mosaic`, `openintro` and `tidtverse` libraries have been loaded. \n\n2. View the nyc_marathon dataset the view(nyc_marathon).\n\n3. Let's take a look at the `Men` and `Women` time averages separately. They are “levels” of the `division` variable. Use `gf_boxplot()` to plot them and check for outliers. \n\n```{r nyc-marathon-boxplot,exercise=TRUE}\n\n```\n\n```{r nyc-marathon-boxplot-hint}\ngf_boxplot(time_hrs~division,data=nyc_marathon)\n```\n\nYou should see boxplots for men and women winners of `nyc_marathon` runners. Not the many outliers showing slower runners.\n\n## Finding the bounds for the fences\n\nWe can calculate the upper and lower limit for outliers by hand or go through the steps with R as in the chunk below:\n\n```{r outlier, exercise = TRUE}\n#This saves the favstats output\nsaved_stats <- favstats(time_hrs~division,data=nyc_marathon) \n\n#This calculates the IQRs for each group. na.rm removes cells without data.\nsaved_stats_iqr <- iqr(time_hrs~division,data=nyc_marathon,na.rm=TRUE) \t\n\n#This is the upper cutoff for outliers\nupper <- saved_stats$Q3 + 1.5*saved_stats_iqr \t\t\t\n\n#This is the lower cutoff for outliers\nlower <- saved_stats$Q1 - 1.5*saved_stats_iqr \t\t\t#\n\n#This shows us the upper and lower cutoffs for outliers\nupper \nlower\n```\n\n## Filter out the outliers\n\nOnce we know the upper limits we can remove the outliers with the `filter()` function. We don't need to filter by the lower limit because there are not lower outliers. The `filter()` function takes the data frame we want to filter and the constraints we want to filter by, see code below. \n\n```{r filtering, exercise=TRUE}\nnyc_marathon_no_outs <- \n  filter(nyc_marathon, \n         time_hrs < 2.575694 & division =='Women' | \n           time_hrs < 2.258437 & division =='Men'\n         )\n\nnyc_marathon_no_outs\n```\n## Veryfiy that outliers have been removed\n\nThe data is being saved as `nyc_marathon_no_outs`. Make a new boxplot with this data below to verify that the outlier have been removed. \n\n```{r removed-setup}\nnyc_marathon_no_outs <- \n  filter(nyc_marathon, \n         time_hrs < 2.575694 & division =='Women' | \n           time_hrs < 2.258437 & division =='Men'\n         )\n\n```\n\n```{r removed, exercise=TRUE}\n\n```\n\n\n\n```{r removed-hint}\ngf_boxplot(time_hrs~division,data=nyc_marathon_no_outs,coef=1.5)\n```\n\nIt looks like there is still an outlier in the Men's division. But there is not! We removed the outliers from `nyc_marathon` but we changed the dataset with `filter()`. When we did this R forgot about the original data `nyc_marathon` and is calculating outliers in the new `nyc_marathon_no_outs` data. We have to understand all the outliers from the original dataset have been removed, we should not remove more. To cover up this fake outlier we can change the `coef` argument to 2. \n\n## No Assignment Due\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":"learnr::tutorial","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"13th_Rtutorial_remove_outliers.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.0.37","title":"Tutorial","runtime":"shiny_prerendered"},"extensions":{"book":{"multiFile":true}}}}}